<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مؤشر macd (MACD)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #timeframe {
            margin-bottom: 20px;
        }
        #favorite-section {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1 id="indicator-title">مؤشر ماكد (MACD) للعملة: <span id="crypto-name"> - </span></h1>
    
    <label for="timeframe">اختر الفريم الزمني:</label>
    <select id="timeframe" onchange="updateMACDData()">
        <option value="1m">دقيقة</option>
        <option value="5m">5 دقائق</option>
        <option value="15m">15 دقيقة</option>
        <option value="1h">ساعة</option>
        <option value="1d">يوم</option>
        <option value="1w">أسبوع</option>
        <option value="1M">شهر</option>
        <option value="1y">سنة</option>
    </select>
    
    <canvas id="macdChart" width="400" height="200"></canvas>

    <div id="favorite-section">
        <h3>المفضلة</h3>
        <input type="text" id="favorite-input" placeholder="أضف عملة إلى المفضلة">
        <button onclick="addToFavorites()">أضف</button>
        <ul id="favorites-list"></ul>
    </div>

    <script>
        const ctx = document.getElementById('macdChart').getContext('2d');
        const macdChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [], // سيتم تحديثها لاحقًا
                datasets: [{
                    label: 'MACD',
                    data: [], // سيتم تحديثها لاحقًا
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        min: -5,
                        max: 5,
                    }
                }
            }
        });

        function updateMACDData() {
            const selectedTimeframe = document.getElementById('timeframe').value;
            // هنا يمكنك إضافة منطق لتحميل بيانات MACD الخاصة بالفريم الزمني المحدد
            // هذا مثال بسيط يتم فيه تحديث البيانات بشكل عشوائي
            const newData = Array.from({ length: 6 }, () => Math.random() * 10 - 5);
            const newLabels = Array.from({ length: 6 }, (_, i) => `${i + 1} ${selectedTimeframe}`);
            macdChart.data.labels = newLabels;
            macdChart.data.datasets[0].data = newData;
            macdChart.update();
        }

        function addToFavorites() {
            const favoriteInput = document.getElementById('favorite-input');
            const favoriteValue = favoriteInput.value.trim();
            if (favoriteValue) {
                const favoritesList = document.getElementById('favorites-list');
                const newFavoriteItem = document.createElement('li');
                newFavoriteItem.textContent = favoriteValue;
                favoritesList.appendChild(newFavoriteItem);
                favoriteInput.value = ''; // إفراغ خانة الإدخال بعد الإضافة
            } else {
                alert("يرجى إدخال اسم العملة");
            }
        }

        // استدعاء الدالة لتحديث البيانات عند تحميل الصفحة
        updateMACDData();
    </script>
</body>
</html>
